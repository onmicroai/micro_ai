{% load i18n %}
{% load static %}
{% load form_tags %}
{% if turnstile_key %}
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
{% endif %}
{% load static %}
{% load meta_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!--IE compatibility-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--Mobile friendly-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
{% block meta %}
{% if project_meta %}
  {% with project_meta|get_title:page_title as title %}
  {% with project_meta|get_description:page_description as description %}
  {% with project_meta|get_image_url:page_image as image %}
      <title>{% block page_title %}{{ title }}{% endblock %}</title>
      <meta name="description" content="{{ description }}">
      <meta name="keywords" content="{{ project_meta.KEYWORDS }}">
      <!-- Twitter Card data -->
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:title" content="{{ title }}">
      <meta name="twitter:description" content="{{ description }}">
      <meta name="twitter:image" content="{{ image }}">
      <!-- Open Graph data -->
      <meta property="og:title" content="{{ title }}" />
      <meta property="og:type" content="website" />
      <meta property="og:url" content="{{ page_url }}" />
      <meta property="og:image" content="{{ image }}" />
      <meta property="og:description" content="{{ description }}" />
      <meta property="og:site_name" content="{{ project_meta.NAME }}" />
      <link rel="canonical" href="{% if page_canonical_url %}{{ page_canonical_url }}{% else %}{{ page_url }}{% endif %}">
  {% endwith %}
  {% endwith %}
  {% endwith %}
{% endif %}
{% endblock meta %}
{% include 'web/components/favicon.html' %}
    <link rel="stylesheet" href="{% static 'css/site-tailwind.css' %}">
    <!-- <link rel="stylesheet" href="static/css/site-tailwind.css"> -->
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/v4-shims.min.css" integrity="sha512-ARfx5eajdcCAuWvuJrgUuJ6D25ON3KZRTCghNXXKeJldCQJ5bXS+6CvG2EhcFWITF95uwZydzpufSKvhmSpTxA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    {% if GOOGLE_ANALYTICS_ID %}
        {% include 'web/components/google_analytics.html' %}
    {% endif %}
    <script src="{% static 'js/site-bundle.js'%}" defer></script>
    <script>__cssFramework = 'tailwind';</script>
    {% block page_head %}
    {% endblock %}
</head>
<body class="register">
  <div class="welcome-wrapper">
      <div class="wrapper-content">
          <h1>Register</h1>
          <form class="welcome-form" method="post">    
              {% csrf_token %}            
              <!-- <div class="welcome-field">
                  <input type="text" placeholder="Full Name" name="full_name">
              </div>                 -->
              <div class="welcome-field">
                {% render_field form.email %}
              </div>
              <!-- <div class="welcome-field">
                  <input type="text" placeholder="Username" name="username">
              </div> -->
              <div class="welcome-field" >
                {% render_field form.password1 %}
                <span class="password-toggle-icon"><i class="fas fa-eye"></i></span>
              </div>
              {% if project_settings.ACCOUNT_SIGNUP_PASSWORD_ENTER_TWICE %}
              <div class="welcome-field">
                {% render_field form.password2 %}
                <span class="confirm-password-toggle-icon"><i class="fas fa-eye"></i></span>
              </div>
              {% endif %}
           
              <!-- {% render_field form.terms_agreement %} -->
              <input type="submit" value="{% translate "Sign Up" %}">
                <!-- {% translate "Already have account?" %} -->
              <a href="{% url 'account_login' %}">Already have an account? Log in
                <!-- {% translate "Go to sign in." %} -->
              </a>
          </form>
      </div>
  </div>
</body>
<script>
  document.addEventListener("DOMContentLoaded", function() {
      var passwordField = document.querySelector('.welcome-field input[name="password2"]');
      var emailField = document.querySelector('.welcome-field input[name="email"]');

        if (passwordField) {
            passwordField.setAttribute('placeholder', 'Confirm Password');
        }

        if(emailField){
          emailField.setAttribute('placeholder', 'Email');
        }
  });

  // password toogle functionality
  const passwordField = document.getElementById("id_password1");
        const togglePassword = document.querySelector(".password-toggle-icon i");
        const confirmPasswordField = document.getElementById("id_password2");
        const toggleConfirmPassword = document.querySelector(".confirm-password-toggle-icon i");

        togglePassword.addEventListener("click", function () {
        if (passwordField.type === "password") {
            passwordField.type = "text";
            togglePassword.classList.remove("fa-eye");
            togglePassword.classList.add("fa-eye-slash");
        } else {
            passwordField.type = "password";
            togglePassword.classList.remove("fa-eye-slash");
            togglePassword.classList.add("fa-eye");
        }
        });

        toggleConfirmPassword.addEventListener('click',()=>{
            if (confirmPasswordField.type === 'password'){
                confirmPasswordField.type = "text";
                toggleConfirmPassword.classList.remove("fa-eye");
                toggleConfirmPassword.classList.add("fa-eye-slash");
            }
            else{
                confirmPasswordField.type = "password";
                toggleConfirmPassword.classList.remove("fa-eye-slash");
                toggleConfirmPassword.classList.add("fa-eye");
            }
        })

</script> 
</html>
